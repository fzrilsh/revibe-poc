generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  nickname          String                 @map("nickname")
  birthYear         Int?                   @map("birth_year")
  profileImage      String?                @map("profile_image")
  skinType          SkinType?              @map("skin_type")
  createdAt         DateTime               @default(now()) @map("created_at")
  id                String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  onboardingAnswers UserOnboardingAnswer[]
  skinConcerns      UserSkinConcern[]
  posts             Post[]
  comments          Comment[]
  likes             Like[]

  @@map("users")
}

model SkinConcern {
  id                 Int               @id @default(autoincrement())
  name               String            @unique
  user_skin_concerns UserSkinConcern[]

  @@map("skin_concerns")
}

model UserSkinConcern {
  skinConcernId Int         @map("skin_concern_id")
  userId        String      @map("user_id") @db.Uuid
  skinConcern   SkinConcern @relation(fields: [skinConcernId], references: [id])
  user          User        @relation(fields: [userId], references: [id])

  @@id([userId, skinConcernId])
  @@map("user_skin_concerns")
}

model OnboardingQuestion {
  id                    Int                    @id @default(autoincrement())
  text                  String
  order                 Int                    @default(0)
  createdAt             DateTime               @default(now()) @map("created_at")
  userOnboardingAnswers UserOnboardingAnswer[]

  @@map("onboarding_questions")
}

model UserOnboardingAnswer {
  id         Int                @id @default(autoincrement())
  value      String
  createdAt  DateTime           @default(now()) @map("created_at")
  questionId Int                @map("question_id")
  userId     String             @map("user_id") @db.Uuid
  question   OnboardingQuestion @relation(fields: [questionId], references: [id])
  user       User               @relation(fields: [userId], references: [id])

  @@map("user_onboarding_answers")
}

enum SkinType {
  OILY
  DRY
  COMBINATION
  SENSITIVE
  NORMAL
}
